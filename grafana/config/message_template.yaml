# Based on
# https://softwaremill.com/mastering-alerts-in-grafana-kubernetes-provisioning-and-slack-notifications/
templates:
  - orgID: 1
    name: webex.message
    template: |
      {{ define "webex.print_alert" -}}

      {{ if .Annotations }}
      ğŸ“ **Summary:** {{ .Annotations.summary}}
      {{ if .Annotations.description }}
      **Description:** {{ .Annotations.description }}
      {{ end }}
      {{ end }}

      Link(s):
      {{ if .DashboardURL }}
      - ğŸ“Š [Grafana Dashboard]({{ .DashboardURL }})
      {{ end }}
      {{ if .PanelURL }}
      - ğŸ“ˆ [Panel Dashboard]({{ .PanelURL }})
      {{ end }}
      {{ if .SilenceURL }}
      - ğŸ”• [Silence this alert]({{ .SilenceURL }})
      {{- end }}
      {{- end }}

      {{ define "webex.message" -}}
      {{ if .Alerts.Firing }}
      ### ğŸš¨ Network Alert ğŸš¨
      ğŸ”¥ Firing alert(s): {{ len .Alerts.Firing }}

      {{- range $i, $alert := .Alerts.Firing }}
      {{ template "webex.print_alert" $alert }}

      ---

      {{- end }}
      {{- end }}
      {{- end }}
